http://www.elmed-rostov.ru/bugtracker/edit_bug.aspx?id=47022

#nozol

>	Нозология. Реализовать возможность создания скриптов для нозологий

В справочник нозоформ была добавлена возможность сохранить SQL-скрипты, для последующего UPGRADE'а в МО, аналогично справочнику отчетов.

Данный функционал доступен в учетной записи Техподдержка, а именно:

1. добавляются 2 колонки:
    - p.prn - признак внесенных изменений в какую-либо таблицу нозологии (Таблица нозологий (nozol), Таблица строк нозологий (nozolstr), Таблица детализации строк нозологий (nozoldet)) и необходимость сохранения записи 
    - SQL - кнопка, вызывающая модальное окно с тремя чекбоксами, соответствующими каждой из таблиц
2. Каждое внесение изменений в любой из таблиц должно сопровождать изменение признака. Если признак пустой - нозоформа не нуждается в сохранении для UPGRADE'а в МО. Если признак имеет значение "save to SQL!" - то после сохранения SQL он установится в пустое значение.
3. Если при сохранении возникли какие-либо ошибки, они будут выведены на экран в виде оранжевых уведомлений. К данным ошибкам относится отсутствие VIEW:
    - View import_nozol не существует
    - View import_nozolstr не существует
    - View import_nozoldet не существует
    - View import_nozolstr и import_nozoldet не существует

Тестировать на [http://192.168.0.204:2096/directory/nozoform](http://192.168.0.204:2096/directory/nozoform):

1. Учетная запись Техподдержка
2. нозоформа test
