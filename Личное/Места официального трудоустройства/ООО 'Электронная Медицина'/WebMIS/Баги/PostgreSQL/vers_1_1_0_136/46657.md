http://www.elmed-rostov.ru/bugtracker/edit_bug.aspx?id=46657

#service #sql_fun

>	Сервис (общий) - решение проблемы взаимных блокировок при выполнении отчетов

**em_service_main.sql** - добавлено создание временной таблицы и вызов обновленной функции **em_service_upd_result**. 
**em_service_upd_result.sql** - функция обновлена для работы с временной таблицы из родительской функции **em_service_main**.

Увеличено поле "npoli" с 50 до 110 символов во временной таблицы в **em_service_ctrl_break.sql** по причине ошибки при выполнении проверки "Контроль лечения". Ячейка имела ограничение в 50 символов, а записывае  мые данные являлись суммой двух полей, максимальной длинной по 50 символов каждое и разделителя в виде "; ". _- create temp table Talon -почему не сделать просто varchar ? (Курбесова)_

Вопросы:
1) можно сделать чтобы не было строк (если нет данных) ? - тогда "отчеты" сами нарисуют  Н - посоветуйся с Надеждой
2) Контроль КСГ/МКБ - можно написать что отчет находится в разработке, текст возьми у Андрея Ш.

Изменена функция **em_service_main**.
Добавлены сообщения для случаев формирования отчетов без проверяемых данных.
